\documentclass[10pt, a4paper]{article}

% slovencina
\usepackage[activeacute, slovak, english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% rozmery stranky
%\usepackage{a4wide}
\addtolength{\voffset}{-3cm}
\addtolength{\hoffset}{-1.5cm}
\addtolength{\textwidth}{3 cm}
\addtolength{\textheight}{5 cm}
\usepackage{array}
\usepackage{mdwlist}

% fonty pre text a matematiku
%\usepackage{newcent}
%\usepackage{euler}
\usepackage{amsmath}


% AMS-TeX
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{multicol}
\usepackage{amsthm}

\def\ans#1{\big[\hskip 2mm {#1}\hskip 2mm\big]}
\def\N{\mathbb N}
\def\Z{\mathbb Z}
\def\Q{\mathbb Q}
\def\R{\mathbb R}
\def\C{\mathbb C}

\DeclareMathOperator{\lubi}{lubi}
\DeclareMathOperator{\capuje}{capuje}
\DeclareMathOperator{\navstivil}{navstivil}
\DeclareMathOperator{\vypil}{vypil}
\DeclareMathOperator{\answera}{answer\_a}
\DeclareMathOperator{\answerb}{answer\_b}
\DeclareMathOperator{\answerc}{answer\_c}
\DeclareMathOperator{\answerd}{answer\_d}

\begin{document}
\selectlanguage{slovak}

\addtolength{\parskip}{0.5\baselineskip}

\pagestyle{empty}


\centerline{\bf\large Domáca úloha č. 1 (max. 30 bodov)}

\bigskip

\noindent Daná je databáza
\begin{eqnarray*}
& & \lubi(Pijan, Alkohol), \capuje(Krcma, Alkohol, Cena),\\
& & \navstivil(Id, Pijan, Krcma, Od), \vypil(Id, Alkohol, Mnozstvo).
\end{eqnarray*}
Atribút $Id$ v reláciách $\navstivil$ a $\vypil$ je identifikátorom návštevy; každá návšteva zahŕňa práve jedného pijana a práve jednu krčmu. Atribút $Od$ udáva čas, kedy návšteva začala. V každom momente môže byť pijan v nanajvýš jednej krčme. 

Atribút $Cena$ udáva cenu daného alkoholu v danej krčme (ceny sa nemenia). Každá krčma čapuje aspoň jeden alkohol.
Atribút $Mnozstvo$ je celkové množstvo alkohol vypitého pri danej návšteve (pre každú dvojicu $Id, Alkohol$ je vo $\vypil$ nanajvýš jeden záznam); $Mnozstvo > 0$. Vo $\vypil$ sú zaznamenané len alkoholy, ktoré čapuje navštívená krčma.

Môžete predpokladať, že databáza neobsahuje žiaden spor (napr. rôzni pijani pre jednu hodnotu $Id$ v $\navstivil$).

\noindent Vašou úlohou je napísať nasledujúce štyri dotazy.

\begin{itemize}
\item $\answera(P, K)$

Pijan je \emph{lojálny ku krčme} K, ak v nej pil aspoň raz a žiaden z alkoholov, ktorý
kedykoľvek pil v K, už potom nikde inde nepil.
Nájdite všetky dvojice [P, K] také, že pijan P je lojálny ku krčme K.

\item $\answerb(P, A)$

Pijan je \emph{silne závislý} na alkohole A vtedy, ak
alkohol A pil aspoň raz a konzumuje ho pri každej návšteve krčmy, ktorá A čapuje; a zároveň platí, že
množstvá A, ktoré pije pri takých návštevách, tvoria s rastúcim časom neklesajúcu
postupnosť. Nájdite všetky dvojice [P, A] také, že pijan P je silne
závislý na alkohole A.

\item $\answerc(P, A)$

Pijan je \emph{jediným rekordérom v pití alkoholu A na jedno posedenie} v
krčme K, ak vypil počas niektorej svojej návštevy krčmy K viac
alkoholu A ako ktorýkoľvek iný pijan počas ktorejkoľvek svojej
návštevy v K (a aspoň raz v krčme K pil). Nájdite dvojice [P, A] také, že pijan P ľúbi alkohol A a
v každej krčme, ktorá čapuje alkohol A, je P jediným rekordérom v pití A na
jedno posedenie.

\item $\answerd(P)$

\emph{Držgroš} je pijan, ktorý pri ľubovoľnej návšteve krčmy je ochotný vypiť len najlacnejší alkohol z tých, ktoré tá krčma čapuje a ktoré on zároveň ľúbi (ak je takých viac, môže piť ľubovoľný), a aj to len vtedy, ak zatiaľ nepozná (t.j. predtým nenavštívil)
krčmu, ktorá ten alkohol čapuje lacnejšie (piť však nemusí vôbec). Nájdite všetkých držgrošov.

(Patria medzi nich aj abstinenti. Vo výsledku chceme len pijanov, ktorí aspoň raz navštívili krčmu. Predpokladáme, že ceny alkoholov sa
nikdy nemenia.)
\end{itemize}

\bigskip 
\bigskip 

\centerline{\bf\large Technické pokyny}

\bigskip

\begin{itemize}
\item Všetky použité pravidlá musia byť bezpečné.
\item Používajte korektnú syntax SWI-Prolog (verzia 5.10.1). Riešenia, v ktorých príkaz {\tt make.} nájde chyby, budú hodnotené len minimálnym počtom bodov.
\item Pri zapisovaní pravidiel {\bf vždy vymenujte najprv pozitívne veci a až potom negatívne} (v datalogu je to jedno, ale prolog na to prihliada pri výpočte).
\item Definície všetkých požadovaných predikátov (a prípadných pomocných predikátov) zapíšte do jediného súboru s názvom {\tt du1.pl}. Tento súbor nesmie obsahovať okrem definícií predikátov a prípadných komentárov nič iné.
\item Súbor {\tt du1.pl} odošlite ako prílohu e-mailu na adresu {\tt mazak.fmfi@gmail.com} s predmetom \uv{{\tt databazove praktikum -{}- du1}}. Tento e-mail musí v tele obsahovať vaše celé meno.
\end{itemize}


\end{document}
